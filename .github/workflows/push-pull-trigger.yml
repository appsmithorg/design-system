# Workflow trigger on any push and pull request
name: Workflow for push and PR

on:
  push:

defaults:
  run:
    working-directory: packages/design-system

# Job will run on a ubuntu instance
jobs:
  build-design-system:
    steps:
    # Configure npm
      - name: Configure npm
        run: |
          cat << EOF > "$HOME/.npmrc"
            //registry.npmjs.org/:_authToken=$NPM_TOKEN
          EOF
        env:
          NODE_AUTH_TOKEN: ${{secrets.APPSMITH_NPM_PUBLISH_KEY}}
          NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
          
      uses: ./.github/workflows/Lib-build-design-system.yml
      name: build-design-system
      env:
          NODE_AUTH_TOKEN: ${{secrets.APPSMITH_NPM_PUBLISH_KEY}}
